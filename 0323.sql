/*03월 23일 수업내용
 * ORACLE DATABASE 정보에 대해서 알아보자!
 * 오라클 성능 관련 동적 VIEW
 * */

--USER 사용자 계정
SELECT *
 FROM V$VERSION;
 
SELECT *
 FROM V$OPTION
 WHERE VALUE = 'TRUE';
 

--SYS, SYSTEM 계정
SELECT *
 FROM V$DATABASE;
 
SELECT *
 FROM V$INSTANCE;

SELECT *
 FROM V$SESSION;
 
SELECT *
 FROM V$PARAMETER;
 
SELECT *
 FROM V$DBLINK;
 
SELECT *
 FROM V$TRANSACTION;
 

/*TRANSACTION : 최소 업무(최소 SQL 실행) 단위 -> 작업 완료, 실패, 롤백 처리 단위 
 * 특징 : ACID ( ATOMACITY, CONSISTENCY ISOLATION DRUABILITY )
 * 원리 : BEGIN으로 시작해 COMMIT으로 완결 ( 중간 SAVEPOINT 설정 가능 )
 * 실행 방법 : 자동실행 설정 또는 수동 실행 
 * TRANSACTION 테스트
 * 
 * 테이블 -> CREATE -> INSERT -> UPDATE -> DELETE -> ROLLBACK -> COMMIT */


CREATE TABLE DEPT_TCL
 AS ( SELECT * FROM DEPT);


SELECT *
 FROM DEPT_TCL;


INSERT INTO DEPT_TCL
 VALUES (50, 'DATABASE', 'SEOUL');


UPDATE DEPT_TCL
 SET LOC = 'BUSAN'
 WHERE DEPTNO = 40;


DELETE FROM DEPT_TCL 
 WHERE DNAME = 'RESEARCH'; 


SELECT *
 FROM DEPT_TCL;


ROLLBACK;


--COMMIT 실행하는 경우
INSERT INTO DEPT_TCL
 VALUES (50, 'NETWORK', 'LONDON');




CREATE TABLE DEPTT (
	  DEPTNO	NUMBER(4,0)		PRIMARY KEY NOT NULL
	, DNAME	 	VARCHAR(10) 	NOT NULL
);

CREATE TABLE EMPP (
	  EMPNO		NUMBER(10,0)	PRIMARY KEY NOT NULL
	, DEPTNO	NUMBER(4,0)		NOT NULL
	, NAME 		VARCHAR2(10)	NOT NULL
	, HIREDATE	DATE			NULL
	, JOB		VARCHAR2(255)	NULL
	, SAL 		NUMBER(13,0)	NOT NULL
);

CREATE TABLE GRADE (
	EMPNO		NUMBER(10,0)	NOT NULL
	, GRADE 	NUMBER(10,0)	NULL
	, DESCR		VARCHAR2(1000)	NULL
);

CREATE TABLE SALGRADEE (
	  SALARYGRADE 	NUMBER(10,0) 	NOT NULL
	, LOSAL			NUMBER(13,0)	NULL
	, HISAL			NUMBER(13,0)	NULL
);






DELETE FROM DEPT_TCL
 WHERE DEPTNO = 10;


SELECT *
 FROM DEPT_TCL;


COMMIT;


ROLLBACK;


SELECT *
 FROM DEPT_TCL;


